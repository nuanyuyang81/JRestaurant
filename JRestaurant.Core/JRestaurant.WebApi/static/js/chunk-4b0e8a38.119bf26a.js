(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b0e8a38"],{"2af9":function(e,t,a){"use strict";var l=a("7569"),n=a.n(l);n.a},7569:function(e,t,a){},cc5e:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return o}));var l=a("b775");function n(){return Object(l["a"])({url:"/admin/role/ListAllRoles",method:"get"})}function i(e){return Object(l["a"])({url:"/admin/role/AddRole",method:"post",data:e})}function r(e){return Object(l["a"])({url:"/admin/role/UpdateRole",method:"post",data:e})}function o(e,t){return Object(l["a"])({url:"/admin/role/InActiveRole",params:{roleId:e,ownerId:t}})}},e8d0:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){e.roleDialogVisible=!0}}},[e._v(" 添加权限角色 ")])],1),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loadRole,expression:"loadRole"}],staticStyle:{width:"95%"}},e._l(e.roleList,(function(t){return a("el-col",{key:t.Id,staticStyle:{"margin-top":"10px","margin-left":"10px",width:"320px"}},[a("item",{attrs:{id:t.Id,keyname:t.Key,owner:t.Owner,name:t.Name,comments:t.Comments,createtime:t.CreateTime},on:{updateData:e.refreshData}})],1)})),1),a("el-dialog",{attrs:{title:"权限角色管理",center:"",top:"5vh",visible:e.roleDialogVisible,width:"30%"},on:{"update:visible":function(t){e.roleDialogVisible=t}}},[a("add",{on:{updateData:e.refreshData}})],1)],1)},n=[],i=a("cc5e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticStyle:{height:"150px","text-align":"left"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-tag",[e._v(e._s(e.name))]),a("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",size:"mini"},on:{click:e.deleteRole}},[e._v("删除权限角色")])],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("svg-icon",{staticClass:"modelImage",attrs:{"icon-class":"role"}}),a("el-button",{attrs:{type:"text"},on:{click:e.updateRole}},[e._v("编辑")])],1),a("el-col",{staticStyle:{"font-size":"12px","padding-left":"5px",color:"#606266"},attrs:{span:18}},[a("el-row",{staticStyle:{margin:"5px"}},[e._v("备注: "+e._s(e.comments))]),a("el-row",{staticStyle:{margin:"5px"}},[e._v("添加时间: "+e._s(null!=e.createtime?e.dateformat(e.createtime):""))])],1)],1),a("el-dialog",{attrs:{title:"供应商信息管理",center:"",top:"5vh",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("add",{attrs:{keyname:e.keyname,roleid:e.id,name:e.name,comments:e.comments}})],1)],1)},o=[],s=(a("a9e3"),a("ac1f"),a("5319"),a("1276"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("el-form",{attrs:{"label-width":"120px",rules:e.rules,"label-position":"left",model:e.targetRole,size:"mini"}},[a("el-form-item",{attrs:{label:"角色Key",prop:"Key"}},[a("el-select",{attrs:{clearable:""},model:{value:e.targetRole.Key,callback:function(t){e.$set(e.targetRole,"Key",t)},expression:"targetRole.Key"}},e._l(e.keyList,(function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Name}})})),1)],1),a("el-form-item",{attrs:{label:"角色名",prop:"Name"}},[a("el-input",{model:{value:e.targetRole.Name,callback:function(t){e.$set(e.targetRole,"Name",t)},expression:"targetRole.Name"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"Comments"}},[a("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.targetRole.Comments,callback:function(t){e.$set(e.targetRole,"Comments",t)},expression:"targetRole.Comments"}})],1)],1),a("el-row",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"warning"},on:{click:e.clear}},[e._v("清除")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)}),c=[],m=(a("b0c0"),a("498a"),a("a78e")),u=a.n(m),d={name:"Add",props:{keyname:{type:String,default:null},name:{type:String,default:null},comments:{type:String,default:null},roleid:{type:Number,default:null}},data:function(){return{keyList:[{Id:0,Name:"admin"},{Id:1,Name:"manager"},{Id:2,Name:"staff"}],targetRole:{Key:"",Name:"",Comments:"",Id:0},rules:{Key:[{required:!0,trigger:"blur"}],Name:[{required:!0,trigger:"blur"}],Comments:[{required:!0,trigger:"blur"}]}}},mounted:function(){null!==this.roleid&&(this.targetRole.Key=this.keyname,this.targetRole.Name=this.name,this.targetRole.Comments=this.comments,this.targetRole.Id=this.roleid)},methods:{clear:function(){this.targetRole={Id:"",Key:"",Name:"",Comments:""}},submit:function(){var e=this;null!==this.roleid?Object(i["d"])({Key:this.targetRole.Key,Name:this.targetRole.Name.trim(),Comments:this.targetRole.Comments.trim(),OwnerId:u.a.get("uid"),Id:this.targetRole.Id}).then((function(t){t?(e.$message.success("权限角色信息更新成功"),e.clear()):e.$message.error("权限角色信息更新失败")})).catch((function(e){console.log(e)})):Object(i["a"])({Key:this.targetRole.Key,Name:this.targetRole.Name.trim(),Comments:this.targetRole.Comments.trim(),OwnerId:u.a.get("uid")}).then((function(t){t?(e.$message.success("权限角色添加成功"),e.clear(),e.$emit("updateData")):e.$message.error("权限角色添加失败")})).catch((function(e){console.log(e)}))}}},f=d,g=a("2877"),p=Object(g["a"])(f,s,c,!1,null,null,null),h=p.exports,b={name:"Item",components:{add:h},props:{id:{type:Number,default:null},keyname:{type:String,default:null},name:{type:String,default:null},comments:{type:String,default:null},createtime:{type:String,default:null}},data:function(){return{dialogVisible:!1}},methods:{deleteRole:function(){var e=this;Object(i["b"])(this.id,u.a.get("uid")).then((function(t){t?(e.$message.success("成功删除权限角色"),e.$emit("updateData")):e.$message.error("权限角色删除失败")})).catch((function(e){console.log(e)}))},updateRole:function(){this.dialogVisible=!0},dateformat:function(e){var t=e;if(null!=t){t=t.replace(/\D/g," ");var a=t.split(" ");a[1]--;var l=new Date(Date.UTC(a[0],a[1],a[2],a[3],a[4],a[5]));return l.toLocaleString()}return""}}},y=b,v=(a("2af9"),Object(g["a"])(y,r,o,!1,null,"33e3bc02",null)),R=v.exports,w={name:"Role",components:{item:R,add:h},data:function(){return{roleList:[],loadRole:!1,roleDialogVisible:!1}},mounted:function(){this.refreshData()},methods:{refreshData:function(){var e=this;this.loadRole=!0,Object(i["c"])().then((function(t){e.roleList=t,e.loadRole=!1})).catch((function(e){console.log(e)}))}}},k=w,x=Object(g["a"])(k,l,n,!1,null,null,null);t["default"]=x.exports}}]);