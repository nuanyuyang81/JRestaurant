(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51a10266"],{"657e":function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return l})),n.d(e,"b",(function(){return s}));var o=n("b775");function a(t){return Object(o["a"])({url:"/admin/foodspo/ListFoodsPOByWeek",method:"get",params:{week:t}})}function r(){return Object(o["a"])({url:"/admin/foodspo/GetFoodsPOByToDay",method:"get"})}function i(t){return Object(o["a"])({url:"/admin/foodspo/AddFoodsPO",method:"post",data:t})}function l(t){return Object(o["a"])({url:"/admin/foodspo/UpdateFoodsPO",method:"post",data:t})}function s(t){return Object(o["a"])({url:"/api/foodspo/"+t,method:"delete"})}},"90f6":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:t.addFoodsPO}},[t._v(" 添加料理进货记录 ")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.foodsPOList}},[n("el-table-column",{attrs:{prop:"WeekDay",label:"星期",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[n("el-tag",{attrs:{size:"medium"}},[t._v(t._s(t.convertWeekDay(o.WeekDay)))])]}}])}),n("el-table-column",{attrs:{prop:"AddDate",label:"进货日期",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[n("span",[t._v(t._s(t.dateformat(o.AddDate)))])]}}])}),n("el-table-column",{attrs:{prop:"VendorName",label:"供应商"}}),n("el-table-column",{attrs:{prop:"Amount",label:"进货金额￥"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[o.editable?[n("el-input-number",{staticStyle:{width:"160px"},attrs:{precision:2,step:.1},model:{value:o.Amount,callback:function(e){t.$set(o,"Amount",e)},expression:"row.Amount"}}),o.editable?n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning"},on:{click:function(e){return t.cancelEdit(o)}}},[t._v("取消")]):t._e()]:n("span",[t._v(t._s(o.Amount))])]}}])}),n("el-table-column",{attrs:{prop:"UserName",label:"添加人"}}),n("el-table-column",{attrs:{prop:"Comments",label:"备注"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[o.editable?[n("el-input",{staticStyle:{width:"160px"},model:{value:o.Comments,callback:function(e){t.$set(o,"Comments",e)},expression:"row.Comments"}}),o.editable?n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning"},on:{click:function(e){return t.cancelEdit(o)}}},[t._v("取消")]):t._e()]:n("span",[t._v(t._s(o.Comments))])]}}])}),n("el-table-column",{attrs:{prop:"CreateTime",label:"添加时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[n("span",[t._v(t._s(t.timeformat(o.CreateTime)))])]}}])}),n("el-table-column",{attrs:{width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[o.editable?n("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:""},on:{click:function(e){return t.confirmEdit(o)}}}):n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){return t.edit(o)}}}),n("el-popconfirm",{attrs:{title:"确认要删除这条进货记录吗？"},on:{onConfirm:function(e){return t.deleteFoodsPO(o.Id)}}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)]}}])})],1),n("el-drawer",{attrs:{size:"90%",visible:t.foodsPODialogVisible,direction:t.direction,"destroy-on-close":!0},on:{"update:visible":function(e){t.foodsPODialogVisible=e}}},[n("template",{slot:"title"},[n("span",{staticStyle:{"text-align":"center","font-weight":"bold","font-size":"20px"}},[t._v("料理食材进货管理")])]),n("addbatch",{on:{updateData:function(e){return t.refreshData(1)}}})],2)],1)},a=[],r=(n("4160"),n("ac1f"),n("5319"),n("1276"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticStyle:{"margin-top":"10px","max-width":"800px","margin-right":"auto","margin-left":"auto"}},[n("el-row",{staticStyle:{"text-align":"center","margin-top":"10px"}},[n("el-form",{ref:"form",attrs:{"label-width":"80px",size:"mini"}},[n("el-form-item",{attrs:{label:"进货日期"}},[n("el-date-picker",{staticStyle:{width:"150px"},attrs:{align:"right",type:"date",placeholder:"选择进货日期"},model:{value:t.AddDate,callback:function(e){t.AddDate=e},expression:"AddDate"}}),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:t.clear}},[t._v("清除")]),n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.vendorList,border:"",fit:""}},[n("el-table-column",{attrs:{label:"序列",type:"index",width:"50"}}),n("el-table-column",{attrs:{align:"center",label:"供应商",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[n("el-tag",{attrs:{size:"medium",effect:"plain"}},[t._v(t._s(o.vendorName))])]}}])}),n("el-table-column",{attrs:{label:"进货金额",width:"185"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[[n("el-input-number",{staticStyle:{width:"160px"},attrs:{precision:2,step:.1},model:{value:o.Amount,callback:function(e){t.$set(o,"Amount",e)},expression:"row.Amount"}})]]}}])}),n("el-table-column",{attrs:{label:"备注"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[[n("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:o.Comments,callback:function(e){t.$set(o,"Comments",e)},expression:"row.Comments"}})]]}}])})],1)],1)}),i=[],l=(n("d3b7"),n("4d63"),n("25f0"),n("4d90"),n("c45a")),s=n("657e"),c=n("a78e"),d=n.n(c),u={name:"AddBatch",data:function(){return{vendorList:[],AddDate:"",rules:{VendorId:[{required:!0,trigger:"blur"}],Amount:[{required:!0,trigger:"blur"}],AddDate:[{required:!0,trigger:"blur"}],Comments:[{required:!0,trigger:"blur"}]}}},mounted:function(){var t=this,e=new Date;this.AddDate=this.dateFormat("YYYY-mm-dd HH:MM:SS",e),Object(l["a"])(0).then((function(e){for(var n=e,o=0;o<n.length;o++)t.vendorList.push({vendorId:n[o].Id,vendorName:n[o].Name,Amount:0,Comments:""})})).catch((function(t){console.log(t)}))},methods:{clear:function(){this.AddDate=""},submit:function(){var t=this;this.vendorList.forEach((function(e){Object(s["a"])({VendorId:e.vendorId,Amount:e.Amount,AddDate:t.AddDate,Comments:e.Comments,OwnerId:d.a.get("uid")}).then((function(e){e?t.$message.success("料理进货记录添加成功"):t.$message.error("料理进货记录添加失败")})).catch((function(t){console.log(t)}))}))},dateFormat:function(t,e){var n,o={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(var a in o)n=new RegExp("("+a+")").exec(t),n&&(t=t.replace(n[1],1===n[1].length?o[a]:o[a].padStart(n[1].length,"0")));return t}}},f=u,m=n("2877"),p=Object(m["a"])(f,r,i,!1,null,null,null),b=p.exports,h={name:"FoodsPO",components:{addbatch:b},data:function(){return{foodsPODialogVisible:!1,loading:!1,direction:"ttb",foodsPOList:[],targetId:null,editable:!1}},mounted:function(){this.refreshData(1)},methods:{refreshData:function(t){var e=this;this.foodsPOList=[],this.loading=!0,Object(s["c"])(t).then((function(t){t.forEach((function(t){t.editable=!1,e.foodsPOList.push(t)})),e.loading=!1})).catch((function(t){console.log(t)}))},edit:function(t){t.editable=!0},confirmEdit:function(t){var e=this;Object(s["e"])({VendorId:t.VendorId,Amount:t.Amount,AddDate:t.AddDate,Comments:t.Comments,OwnerId:d.a.get("uid"),Id:t.Id}).then((function(t){t?(e.$message.success("料理进货记录更新成功"),e.refreshData(1)):e.$message.error("料理进货记录更新失败")})).catch((function(t){console.log(t)}))},cancelEdit:function(t){t.editable=!1},deleteFoodsPO:function(t){var e=this;Object(s["b"])(t).then((function(t){t?(e.$message.success("料理进货记录删除成功"),e.refreshData(1)):e.$message.error("删除失败")})).catch((function(t){console.log(t)}))},addFoodsPO:function(){this.targetId=null,this.foodsPODialogVisible=!0},convertWeekDay:function(t){var e="";switch(t){case 1:e="星期一";break;case 2:e="星期二";break;case 3:e="星期三";break;case 4:e="星期四";break;case 5:e="星期五";break;case 6:e="星期六";break;case 7:e="星期天";break;default:e="星期一";break}return e},dateformat:function(t){var e=t;if(null!=e){e=e.replace(/\D/g," ");var n=e.split(" ");n[1]--;var o=new Date(Date.UTC(n[0],n[1],n[2]));return o.toLocaleDateString()}return""},timeformat:function(t){var e=t;if(null!=e){e=e.replace(/\D/g," ");var n=e.split(" ");n[1]--;var o=new Date(Date.UTC(n[0],n[1],n[2],n[3],n[4],n[5]));return o.toLocaleString()}return""}}},g=h,v=Object(m["a"])(g,o,a,!1,null,null,null);e["default"]=v.exports},c45a:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"e",(function(){return l})),n.d(e,"c",(function(){return s}));var o=n("b775");function a(){return Object(o["a"])({url:"/admin/vendor/GetTotalCount",method:"get"})}function r(t){return Object(o["a"])({url:"/admin/vendor/ListVendorByAim",method:"get",params:{aim:t}})}function i(t){return Object(o["a"])({url:"/admin/vendor/AddVendor",method:"post",data:t})}function l(t){return Object(o["a"])({url:"/admin/vendor/UpdateVendor",method:"post",data:t})}function s(t,e){return Object(o["a"])({url:"/admin/vendor/InActiveVendor",method:"get",params:{id:t,uid:e}})}}}]);