(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b31bf6ec"],{b46a:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:t.addDT}},[t._v(" 添加酒水营业额记录 ")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dtList}},[n("el-table-column",{attrs:{prop:"WeekDay",label:"星期",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("el-tag",{attrs:{size:"medium"}},[t._v(t._s(t.convertWeekDay(r.WeekDay)))])]}}])}),n("el-table-column",{attrs:{prop:"Discount",label:"折后?",width:"100",filters:[{text:"折前",value:!1},{text:"折后",value:!0}],"filter-method":t.filterDiscount,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[e.Discount?n("i",{staticClass:"el-icon-check"}):n("i",{staticClass:"el-icon-close"})]}}])}),n("el-table-column",{attrs:{prop:"Amount",label:"营业金额"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.editable?[n("el-input-number",{staticStyle:{width:"160px"},attrs:{precision:2,step:.1},model:{value:r.Amount,callback:function(e){t.$set(r,"Amount",e)},expression:"row.Amount"}}),r.editable?n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning"},on:{click:function(e){return t.cancelEdit(r)}}},[t._v("取消")]):t._e()]:n("span",[t._v(t._s(r.Amount))])]}}])}),n("el-table-column",{attrs:{prop:"TypeName",label:"营收类型",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("el-tag",{attrs:{size:"medium"}},[t._v(t._s(r.TypeName))])]}}])}),n("el-table-column",{attrs:{prop:"UserName",label:"添加人"}}),n("el-table-column",{attrs:{prop:"CreateTime",label:"添加时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t.timeformat(r.CreateTime)))])]}}])}),n("el-table-column",{attrs:{width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.editable?n("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:""},on:{click:function(e){return t.confirmEdit(r)}}}):n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){return t.edit(r)}}}),n("el-popconfirm",{attrs:{title:"确认要删除这条进货记录吗？"},on:{onConfirm:function(e){return t.deleteDT(r.Id)}}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)]}}])})],1),n("el-drawer",{attrs:{size:"90%",visible:t.ftDialogVisible,direction:t.direction,"destroy-on-close":!0},on:{"update:visible":function(e){t.ftDialogVisible=e}}},[n("template",{slot:"title"},[n("span",{staticStyle:{"text-align":"center","font-weight":"bold","font-size":"20px"}},[t._v("酒水食材进货管理")])]),n("add",{on:{updateData:function(e){return t.refreshData(1)}}})],2)],1)},a=[],i=(n("4160"),n("ac1f"),n("5319"),n("1276"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{staticStyle:{"text-align":"center","margin-top":"10px"}},[n("el-form",{ref:"form",attrs:{"label-width":"80px",size:"mini"}},[n("el-form-item",{attrs:{label:"进货日期"}},[n("el-date-picker",{staticStyle:{width:"150px"},attrs:{align:"right",type:"date",placeholder:"选择进货日期"},model:{value:t.AddDate,callback:function(e){t.AddDate=e},expression:"AddDate"}}),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:t.clear}},[t._v("清除")]),n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-card",{staticStyle:{"margin-top":"10px","max-width":"400px","margin-left":"auto","margin-right":"10px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("酒水营业额")])]),n("el-form",{attrs:{"label-width":"120px","label-position":"left",size:"mini"}},[t._l(t.typeList,(function(e){return n("el-form-item",{key:e.typeId,attrs:{label:e.typeName}},[n("el-input",{model:{value:e.Amount,callback:function(n){t.$set(e,"Amount",n)},expression:"item.Amount"}})],1)})),n("el-form-item",{attrs:{label:"营业总额",prop:"Total"}},[n("el-input",{attrs:{disabled:!0},model:{value:t.Total,callback:function(e){t.Total=e},expression:"Total"}})],1)],2)],1)],1),n("el-col",{attrs:{span:12}},[n("el-card",{staticStyle:{"margin-top":"10px","max-width":"400px","margin-right":"auto","margin-left":"10px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("折扣后酒水营业额")])]),n("el-form",{attrs:{"label-width":"120px","label-position":"left",size:"mini"}},[t._l(t.discountTypeList,(function(e){return n("el-form-item",{key:e.typeId,attrs:{label:e.typeName}},[n("el-input",{model:{value:e.Amount,callback:function(n){t.$set(e,"Amount",n)},expression:"item.Amount"}})],1)})),n("el-form-item",{attrs:{label:"营业总额",prop:"Total"}},[n("el-input",{attrs:{disabled:!0},model:{value:t.discountTotal,callback:function(e){t.discountTotal=e},expression:"discountTotal"}})],1)],2)],1)],1)],1)],1)}),o=[],s=(n("d3b7"),n("4d63"),n("25f0"),n("4d90"),n("d958")),l=n("ffab"),c=n("a78e"),u=n.n(c),d={name:"AddBatch",data:function(){return{typeList:[],discountTypeList:[],AddDate:"",rules:{VendorId:[{required:!0,trigger:"blur"}],Amount:[{required:!0,trigger:"blur"}],AddDate:[{required:!0,trigger:"blur"}],Comments:[{required:!0,trigger:"blur"}]}}},computed:{Total:function(){var t=0;return this.typeList.forEach((function(e){t+=parseFloat(e.Amount)})),t},discountTotal:function(){var t=0;return this.discountTypeList.forEach((function(e){t+=parseFloat(e.Amount)})),t}},mounted:function(){var t=this,e=new Date;this.AddDate=this.dateFormat("YYYY-mm-dd HH:MM:SS",e),Object(s["d"])(1).then((function(e){for(var n=e,r=0;r<n.length;r++)t.typeList.push({typeId:n[r].Id,typeName:n[r].Name,Amount:0,Discount:!1}),t.discountTypeList.push({typeId:n[r].Id,typeName:n[r].Name,Amount:0,Discount:!0})})).catch((function(t){console.log(t)}))},methods:{clear:function(){this.typeList.forEach((function(t){t.Amount=0})),this.discount.forEach((function(t){t.Amount=0})),this.AddDate=""},submit:function(){var t=this;this.Total>0?this.typeList.forEach((function(e){e.Amount>0&&Object(l["a"])({Amount:e.Amount,Discount:e.Discount,TypeId:e.typeId,AddDate:t.AddDate,OwnerId:u.a.get("uid")}).then((function(e){e?t.$message.success("酒水营业额记录记录添加成功"):t.$message.error("酒水营业额记录添加失败")})).catch((function(t){console.log(t)}))})):this.$message.error("请先填写正常营业额"),this.discountTotal>0?this.discountTypeList.forEach((function(e){e.Amount>0&&Object(l["a"])({Amount:e.Amount,Discount:e.Discount,TypeId:e.typeId,AddDate:t.AddDate,OwnerId:u.a.get("uid")}).then((function(e){e?t.$message.success("折后酒水营业额记录记录添加成功"):t.$message.error("折后酒水营业额记录添加失败")})).catch((function(t){console.log(t)}))})):this.$message.error("请先填写折后营业额")},dateFormat:function(t,e){var n,r={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(var a in r)n=new RegExp("("+a+")").exec(t),n&&(t=t.replace(n[1],1===n[1].length?r[a]:r[a].padStart(n[1].length,"0")));return t}}},f=d,m=n("2877"),p=Object(m["a"])(f,i,o,!1,null,null,null),b=p.exports,h={name:"FoodsTurnOver",components:{add:b},data:function(){return{ftDialogVisible:!1,loading:!1,direction:"ttb",dtList:[],targetId:null,editable:!1}},mounted:function(){this.refreshData(1)},methods:{refreshData:function(t){var e=this;this.dtList=[],this.loading=!0,Object(l["c"])(t).then((function(t){t.forEach((function(t){t.editable=!1,e.dtList.push(t)})),e.loading=!1})).catch((function(t){console.log(t)}))},edit:function(t){t.editable=!0},confirmEdit:function(t){var e=this;Object(l["e"])({VendorId:t.VendorId,Amount:t.Amount,AddDate:t.AddDate,Comments:t.Comments,OwnerId:u.a.get("uid"),Id:t.Id}).then((function(t){t?(e.$message.success("酒水营业额记录更新成功"),e.refreshData(1)):e.$message.error("酒水营业额记录更新失败")})).catch((function(t){console.log(t)}))},cancelEdit:function(t){t.editable=!1},deleteDT:function(t){var e=this;Object(l["b"])(t).then((function(t){t?(e.$message.success("酒水营业额记录删除成功"),e.refreshData(1)):e.$message.error("删除失败")})).catch((function(t){console.log(t)}))},addDT:function(){this.targetId=null,this.ftDialogVisible=!0},filterDiscount:function(t,e){return e.Discount===t},convertWeekDay:function(t){var e="";switch(t){case 1:e="星期一";break;case 2:e="星期二";break;case 3:e="星期三";break;case 4:e="星期四";break;case 5:e="星期五";break;case 6:e="星期六";break;case 0:e="星期天";break;default:e="星期一";break}return e},dateformat:function(t){var e=t;if(null!=e){e=e.replace(/\D/g," ");var n=e.split(" ");n[1]--;var r=new Date(Date.UTC(n[0],n[1],n[2]));return r.toLocaleDateString()}return""},timeformat:function(t){var e=t;if(null!=e){e=e.replace(/\D/g," ");var n=e.split(" ");n[1]--;var r=new Date(Date.UTC(n[0],n[1],n[2],n[3],n[4],n[5]));return r.toLocaleString()}return""}}},g=h,v=Object(m["a"])(g,r,a,!1,null,null,null);e["default"]=v.exports},d958:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return l}));var r=n("b775");function a(){return Object(r["a"])({url:"/admin/turnovertype/ListAllTurnOverTypes",method:"get"})}function i(t){return Object(r["a"])({url:"/admin/turnovertype/ListTurnOverTypeByAim",method:"get",params:{aim:t}})}function o(t){return Object(r["a"])({url:"/admin/turnovertype/AddTurnOverType",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/admin/turnovertype/UpdateTurnOverType",method:"post",data:t})}function l(t,e){return Object(r["a"])({url:"/admin/turnovertype/InActiveTurnOverTypes",method:"get",params:{id:t,uid:e}})}},ffab:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return l}));var r=n("b775");function a(t){return Object(r["a"])({url:"/admin/drinksturnover/ListDrinksTurnOverByWeek",method:"get",params:{week:t}})}function i(){return Object(r["a"])({url:"/admin/drinksturnover/ListDrinksTurnOverToday",method:"get"})}function o(t){return Object(r["a"])({url:"/admin/drinksturnover/AddDrinksTurnOver",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/admin/drinksturnover/UpdateDrinksTurnOver",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/api/drinksturnover/"+t,method:"delete"})}}}]);