(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/views/foodsturnover"],{"068b":function(e,t,a){"use strict";var n,r=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}))},"2e95":function(e,t,a){"use strict";a.r(t);var n=a("068b"),r=a("8324");for(var o in r)"default"!==o&&function(e){a.d(t,e,(function(){return r[e]}))}(o);a("7a9c");var i,u=a("f0c5"),s=Object(u["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);t["default"]=s.exports},"59fb":function(e,t,a){},"7a9c":function(e,t,a){"use strict";var n=a("59fb"),r=a.n(n);r.a},8324:function(e,t,a){"use strict";a.r(t);var n=a("8738"),r=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=r.a},8738:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("e8fe"));function r(e){return e&&e.__esModule?e:{default:e}}var o=new n.default,i={name:"TurnOverIndex",data:function(){return{tabCur:2,title:"本周料理营业额",week:1,loadModal:!1,modalName:null,dtList:[],date:"",currentdate:"",ftColumns:[{title:"星期",key:"week",width:100}],ftTableData:[],weekList:[1,2,3,4,5,6,0]}},onLoad:function(){var e=this,t=new Date;this.date=this.timeformat(t.toLocaleString()),this.currentdate=this.timeformat(t.toLocaleString()),this.loadModal=!0,o.get("http://81.70.37.99/JRestaurant/weixin/ListTurnOverTypeByAim",{params:{aim:0}}).then((function(t){var a=t.data;e.ftColumns.push({title:"总额",key:"total",width:130}),a.forEach((function(t){e.ftColumns.push({title:t.Name,key:"Id"+t.Id,width:180})})),e.ftColumns.push({title:"营收日期",key:"date",width:180}),e.refreshData(1)})).catch((function(e){console.log(e)}))},methods:{toChild:function(t){e.navigateTo({url:t.currentTarget.dataset.url})},refreshData:function(e){var t=this;this.loadModal=!0,this.ftTableData=[],this.weekList.forEach((function(e){var a={};t.ftColumns.forEach((function(e){var t=e["key"];a[t]=0})),a.week=t.convertWeekDay(e),a.date="N/A",t.ftTableData.push(a)})),o.get("http://81.70.37.99/JRestaurant/weixin/ListFoodsTurnOverByWeek",{params:{week:e}}).then((function(e){t.dtList=e.data,t.loadModal=!1,t.dtList.forEach((function(e){t.ftTableData.forEach((function(a){if(t.convertWeekDay(e.WeekDay)===a.week){var n="Id"+e.TypeId;a[n]=a[n]+parseFloat(e.Amount),a.date=t.timeformat(e.AddDate)}var r=0;for(var n in a)n.indexOf("Id")>-1&&(r+=parseFloat(a[n]));a.total=r}))}))})).catch((function(e){console.log(e)}))},goToPWeek:function(){this.week--,this.week>0&&this.refreshData(this.week)},goToNWeek:function(){this.week++,this.week>1&&this.refreshData(this.week)},DateChange:function(e){this.date=e.detail.value.replace(/-/g,"/"),console.log(this.date);var t=this.TodayInfo(this.date);console.log(t.week),this.refreshData(t.week)},TodayInfo:function(e){var t,a,n,r,o,i=7,u=["日","一","二","三","四","五","六"],s={week:null,day:null},c=864e5,f=/\d{4}[\/-]\d{1,2}[\/-]\d{1,2}/g;return f.test(e)?(o=new Date(e.replace("-","/")),a=o.getDay(),a=0===a?7:a,t=i-a,n=new Date,s.day=u[n.getDay()],n=new Date(n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()),r=n-o,r<0?s:(r=parseInt(r/c),s.week=Math.ceil((r-t)/i)+1,s)):s},timeformat:function(e){var t=e;if(null!=t){t=t.replace(/\D/g," ");var a=t.split(" ");a[1]--;var n=new Date(Date.UTC(a[0],a[1],a[2],a[3],a[4],a[5])),r=n.toLocaleString();return r.substring(0,r.indexOf(" "))}return""},convertWeekDay:function(e){var t="";switch(e){case 1:t="周一";break;case 2:t="周二";break;case 3:t="周三";break;case 4:t="周四";break;case 5:t="周五";break;case 6:t="周六";break;case 0:t="周日";break;default:t="周一";break}return t}}};t.default=i}).call(this,a("543d")["default"])},ba50:function(e,t,a){"use strict";(function(e){a("0955");n(a("66fd"));var t=n(a("2e95"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])}},[["ba50","common/runtime","common/vendor"]]]);